// SPDX-License-Identifier: MIT

pragma solidity ^0.8.18;

import {Test, console} from "forge-std/Test.sol";
import {DeployMoodNFT} from "../../script/DeployMoodNFT.s.sol";

contract DeployMoodNftTest is Test {
    DeployMoodNFT public deployer;

    function setUp() public {
        deployer = new DeployMoodNFT();
    }

    function testConvertSvgToUri() public view {
        string
            memory expectedUri = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuZGV2L3N2Z2pzIiB2aWV3Qm94PSIwIDAgODAwIDgwMCI+PGRlZnM+PHJhZGlhbEdyYWRpZW50IGlkPSJjY2NsYXltb2ppLWdyYWQtZGFyayIgcj0iOTMlIiBjeD0iMjAlIiBjeT0iMjAlIj48c3RvcCBvZmZzZXQ9IjcwJSIgc3RvcC1jb2xvcj0iaHNsKDM1MSwgMTAwJSwgNjclKSIgc3RvcC1vcGFjaXR5PSIwIj48L3N0b3A+PHN0b3Agb2Zmc2V0PSI5NyUiIHN0b3AtY29sb3I9IiNjNjE5NDUiIHN0b3Atb3BhY2l0eT0iMSI+PC9zdG9wPjwvcmFkaWFsR3JhZGllbnQ+PHJhZGlhbEdyYWRpZW50IGlkPSJjY2NsYXltb2ppLWdyYWQtbGlnaHQiIHI9IjY1JSIgY3g9IjI4JSIgY3k9IjIwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmOGI5ZSIgc3RvcC1vcGFjaXR5PSIwLjc1Ij48L3N0b3A+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSJoc2woMzUxLCAxMDAlLCA2NyUpIiBzdG9wLW9wYWNpdHk9IjAiPjwvc3RvcD48L3JhZGlhbEdyYWRpZW50PjxmaWx0ZXIgaWQ9ImNjY2xheW1vamktYmx1ciIgeD0iLTEwMCUiIHk9Ii0xMDAlIiB3aWR0aD0iNDAwJSIgaGVpZ2h0PSI0MDAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHByaW1pdGl2ZVVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj48ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIzMCIgeD0iMCUiIHk9IjAlIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBpbj0iU291cmNlR3JhcGhpYyIgZWRnZU1vZGU9Im5vbmUiIHJlc3VsdD0iYmx1ciI+PC9mZUdhdXNzaWFuQmx1cj48L2ZpbHRlcj48ZmlsdGVyIGlkPSJpbm5lci1ibHVyIiB4PSItMTAwJSIgeT0iLTEwMCUiIHdpZHRoPSI0MDAlIiBoZWlnaHQ9IjQwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgcHJpbWl0aXZlVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIHg9IjAlIiB5PSIwJSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgaW49IlNvdXJjZUdyYXBoaWMiIGVkZ2VNb2RlPSJub25lIiByZXN1bHQ9ImJsdXIiPjwvZmVHYXVzc2lhbkJsdXI+PC9maWx0ZXI+PGZpbHRlciBpZD0iZXllLXNoYWRvdyIgeD0iLTEwMCUiIHk9Ii0xMDAlIiB3aWR0aD0iNDAwJSIgaGVpZ2h0PSI0MDAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHByaW1pdGl2ZVVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj48ZmVEcm9wU2hhZG93IHN0ZERldmlhdGlvbj0iMTAiIGR4PSIxMCIgZHk9IjEwIiBmbG9vZC1jb2xvcj0iIzAwMDAwMCIgZmxvb2Qtb3BhY2l0eT0iMC4yIiB4PSIwJSIgeT0iMCUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlc3VsdD0iZHJvcFNoYWRvdyI+PC9mZURyb3BTaGFkb3c+PC9maWx0ZXI+PGxpbmVhckdyYWRpZW50IGlkPSJleWUtbGlnaHQiIHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiM1NTU1NTUiIHN0b3Atb3BhY2l0eT0iMSI+PC9zdG9wPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iaHNsYSgwLCAwJSwgMCUsIDEuMDApIiBzdG9wLW9wYWNpdHk9IjAiPjwvc3RvcD48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0ibW91dGgtbGlnaHQiIHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmZmOTMiIHN0b3Atb3BhY2l0eT0iMSI+PC9zdG9wPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iaHNsYSg1NSwgOTQlLCA1NCUsIDEuMDApIiBzdG9wLW9wYWNpdHk9IjAiPjwvc3RvcD48L2xpbmVhckdyYWRpZW50PjxmaWx0ZXIgaWQ9Im1vdXRoLXNoYWRvdyIgeD0iLTEwMCUiIHk9Ii0xMDAlIiB3aWR0aD0iNDAwJSIgaGVpZ2h0PSI0MDAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHByaW1pdGl2ZVVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj48ZmVEcm9wU2hhZG93IHN0ZERldmlhdGlvbj0iMTAiIGR4PSIxMCIgZHk9IjEwIiBmbG9vZC1jb2xvcj0iI2MxYjQwMCIgZmxvb2Qtb3BhY2l0eT0iMC4yIiB4PSIwJSIgeT0iMCUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlc3VsdD0iZHJvcFNoYWRvdyI+PC9mZURyb3BTaGFkb3c+PC9maWx0ZXI+PC9kZWZzPjxnIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTY4MiA0NDkuOTk5OTg1Mjc1ODg1NTRDNjgyIDYyMi41MzY4NTg1OTEyNDk1IDU3Mi41MzY4NzMzMTUzNjM5IDc2Mi40MDQyOTc5NDQzNDkyIDQwMCA3NjIuNDA0Mjk3OTQ0MzQ5MkMyMjcuNDYzODg2NzkyNDUyODMgNzYyLjQwNDI5Nzk0NDM0OTIgMTE4IDYyMi41MzY4NTg1OTEyNDk1IDExOCA0NDkuOTk5OTg1Mjc1ODg1NTRDMTE4IDI3Ny40NjM4NzIwNjgzMzgzMyAyMjcuNDYzODg2NzkyNDUyODMgMTM3LjU5NTY3MjYwNzQyMTg4IDQwMCAxMzcuNTk1NjcyNjA3NDIxODhDNTcyLjUzNjg3MzMxNTM2MzkgMTM3LjU5NTY3MjYwNzQyMTg4IDY4MiAyNzcuNDYzODcyMDY4MzM4MzMgNjgyIDQ0OS45OTk5ODUyNzU4ODU1NFogIiBmaWxsPSIjYzYxOTQ1IiBvcGFjaXR5PSIwLjI1IiBmaWx0ZXI9InVybCgjY2NjbGF5bW9qaS1ibHVyKSI+PC9wYXRoPjxwYXRoIGQ9Ik02ODIgNDAwLjAwMDAxMzgyNDIwMjFDNjgyIDU4Mi4zNjgwNDgwMTIyMzY0IDU4Mi4zNjgwMzQxODgwMzQyIDY2NS45MzE2Mzc3NTU4MjYgNDAwIDY2NS45MzE2Mzc3NTU4MjZDMjE3LjYzMjc2OTIzMDc2OTIgNjY1LjkzMTYzNzc1NTgyNiAxMTggNTgyLjM2ODA0ODAxMjIzNjQgMTE4IDQwMC4wMDAwMTM4MjQyMDIxQzExOCAyMTcuNjMyNzgzMDU0OTcxMyAyMTcuNjMyNzY5MjMwNzY5MiAxMzQuMDY4Mzg5ODkyNTc4MTIgNDAwIDEzNC4wNjgzODk4OTI1NzgxMkM1ODIuMzY4MDM0MTg4MDM0MiAxMzQuMDY4Mzg5ODkyNTc4MTIgNjgyIDIxNy42MzI3ODMwNTQ5NzEzIDY4MiA0MDAuMDAwMDEzODI0MjAyMVogIiBmaWxsPSJoc2woMzUxLCAxMDAlLCA2NyUpIj48L3BhdGg+PHBhdGggZD0iTTY4MiA0MDAuMDAwMDEzODI0MjAyMUM2ODIgNTgyLjM2ODA0ODAxMjIzNjQgNTgyLjM2ODAzNDE4ODAzNDIgNjY1LjkzMTYzNzc1NTgyNiA0MDAgNjY1LjkzMTYzNzc1NTgyNkMyMTcuNjMyNzY5MjMwNzY5MiA2NjUuOTMxNjM3NzU1ODI2IDExOCA1ODIuMzY4MDQ4MDEyMjM2NCAxMTggNDAwLjAwMDAxMzgyNDIwMjFDMTE4IDIxNy42MzI3ODMwNTQ5NzEzIDIxNy42MzI3NjkyMzA3NjkyIDEzNC4wNjgzODk4OTI1NzgxMiA0MDAgMTM0LjA2ODM4OTg5MjU3ODEyQzU4Mi4zNjgwMzQxODgwMzQyIDEzNC4wNjgzODk4OTI1NzgxMiA2ODIgMjE3LjYzMjc4MzA1NDk3MTMgNjgyIDQwMC4wMDAwMTM4MjQyMDIxWiAiIGZpbGw9InVybCgjY2NjbGF5bW9qaS1ncmFkLWRhcmspIj48L3BhdGg+PHBhdGggZD0iTTY4MiA0MDAuMDAwMDEzODI0MjAyMUM2ODIgNTgyLjM2ODA0ODAxMjIzNjQgNTgyLjM2ODAzNDE4ODAzNDIgNjY1LjkzMTYzNzc1NTgyNiA0MDAgNjY1LjkzMTYzNzc1NTgyNkMyMTcuNjMyNzY5MjMwNzY5MiA2NjUuOTMxNjM3NzU1ODI2IDExOCA1ODIuMzY4MDQ4MDEyMjM2NCAxMTggNDAwLjAwMDAxMzgyNDIwMjFDMTE4IDIxNy42MzI3ODMwNTQ5NzEzIDIxNy42MzI3NjkyMzA3NjkyIDEzNC4wNjgzODk4OTI1NzgxMiA0MDAgMTM0LjA2ODM4OTg5MjU3ODEyQzU4Mi4zNjgwMzQxODgwMzQyIDEzNC4wNjgzODk4OTI1NzgxMiA2ODIgMjE3LjYzMjc4MzA1NDk3MTMgNjgyIDQwMC4wMDAwMTM4MjQyMDIxWiAiIGZpbGw9InVybCgjY2NjbGF5bW9qaS1ncmFkLWxpZ2h0KSI+PC9wYXRoPjxwYXRoIGQ9Ik00MDIgMjY0LjVRNDMwIDMzMC41IDQ1NCAyNjQuNSAiIHN0cm9rZS13aWR0aD0iMjEiIHN0cm9rZT0iaHNsYSgwLCAwJSwgMCUsIDEuMDApIiBmaWxsPSJub25lIiBmaWx0ZXI9InVybCgjZXllLXNoYWRvdykiPjwvcGF0aD48cGF0aCBkPSJNNDAyIDI2NC41UTQzMCAzMzAuNSA0NTQgMjY0LjUgIiBzdHJva2Utd2lkdGg9IjciIHN0cm9rZT0idXJsKCNleWUtbGlnaHQpIiBmaWxsPSJub25lIiBmaWx0ZXI9InVybCgjaW5uZXItYmx1cikiPjwvcGF0aD48cGF0aCBkPSJNNDg4LjUgMjYyLjc1UTUyOS41IDMzMS43NSA1NDMuNSAyNjIuNzUgIiBzdHJva2Utd2lkdGg9IjIxIiBzdHJva2U9ImhzbGEoMCwgMCUsIDAlLCAxLjAwKSIgZmlsbD0ibm9uZSIgZmlsdGVyPSJ1cmwoI2V5ZS1zaGFkb3cpIj48L3BhdGg+PHBhdGggZD0iTTQ4OC41IDI2Mi43NVE1MjkuNSAzMzEuNzUgNTQzLjUgMjYyLjc1ICIgc3Ryb2tlLXdpZHRoPSI3IiBzdHJva2U9InVybCgjZXllLWxpZ2h0KSIgZmlsbD0ibm9uZSIgZmlsdGVyPSJ1cmwoI2lubmVyLWJsdXIpIj48L3BhdGg+PHBhdGggZD0iTTQyNi41IDUxNlE0NjYuNSAzMTYgNTc1LjUgNTE2ICIgc3Ryb2tlLXdpZHRoPSIyMSIgc3Ryb2tlPSJoc2xhKDU1LCA5NCUsIDU0JSwgMS4wMCkiIGZpbGw9Im5vbmUiIGZpbHRlcj0idXJsKCNtb3V0aC1zaGFkb3cpIj48L3BhdGg+PHBhdGggZD0iTTQyNi41IDUxNlE0NjYuNSAzMTYgNTc1LjUgNTE2ICIgc3Ryb2tlLXdpZHRoPSI3IiBzdHJva2U9InVybCgjbW91dGgtbGlnaHQpIiBmaWxsPSJub25lIiBmaWx0ZXI9InVybCgjaW5uZXItYmx1cikiPjwvcGF0aD48L2c+PC9zdmc+";
        string
            memory svgToConvert = '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev/svgjs" viewBox="0 0 800 800"><defs><radialGradient id="ccclaymoji-grad-dark" r="93%" cx="20%" cy="20%"><stop offset="70%" stop-color="hsl(351, 100%, 67%)" stop-opacity="0"></stop><stop offset="97%" stop-color="#c61945" stop-opacity="1"></stop></radialGradient><radialGradient id="ccclaymoji-grad-light" r="65%" cx="28%" cy="20%"><stop offset="0%" stop-color="#ff8b9e" stop-opacity="0.75"></stop><stop offset="100%" stop-color="hsl(351, 100%, 67%)" stop-opacity="0"></stop></radialGradient><filter id="ccclaymoji-blur" x="-100%" y="-100%" width="400%" height="400%" filterUnits="objectBoundingBox" primitiveUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feGaussianBlur stdDeviation="30" x="0%" y="0%" width="100%" height="100%" in="SourceGraphic" edgeMode="none" result="blur"></feGaussianBlur></filter><filter id="inner-blur" x="-100%" y="-100%" width="400%" height="400%" filterUnits="objectBoundingBox" primitiveUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feGaussianBlur stdDeviation="2" x="0%" y="0%" width="100%" height="100%" in="SourceGraphic" edgeMode="none" result="blur"></feGaussianBlur></filter><filter id="eye-shadow" x="-100%" y="-100%" width="400%" height="400%" filterUnits="objectBoundingBox" primitiveUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feDropShadow stdDeviation="10" dx="10" dy="10" flood-color="#000000" flood-opacity="0.2" x="0%" y="0%" width="100%" height="100%" result="dropShadow"></feDropShadow></filter><linearGradient id="eye-light" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" stop-color="#555555" stop-opacity="1"></stop><stop offset="100%" stop-color="hsla(0, 0%, 0%, 1.00)" stop-opacity="0"></stop></linearGradient><linearGradient id="mouth-light" x1="50%" y1="0%" x2="50%" y2="100%"><stop offset="0%" stop-color="#ffff93" stop-opacity="1"></stop><stop offset="100%" stop-color="hsla(55, 94%, 54%, 1.00)" stop-opacity="0"></stop></linearGradient><filter id="mouth-shadow" x="-100%" y="-100%" width="400%" height="400%" filterUnits="objectBoundingBox" primitiveUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feDropShadow stdDeviation="10" dx="10" dy="10" flood-color="#c1b400" flood-opacity="0.2" x="0%" y="0%" width="100%" height="100%" result="dropShadow"></feDropShadow></filter></defs><g stroke-linecap="round"><path d="M682 449.99998527588554C682 622.5368585912495 572.5368733153639 762.4042979443492 400 762.4042979443492C227.46388679245283 762.4042979443492 118 622.5368585912495 118 449.99998527588554C118 277.46387206833833 227.46388679245283 137.59567260742188 400 137.59567260742188C572.5368733153639 137.59567260742188 682 277.46387206833833 682 449.99998527588554Z " fill="#c61945" opacity="0.25" filter="url(#ccclaymoji-blur)"></path><path d="M682 400.0000138242021C682 582.3680480122364 582.3680341880342 665.931637755826 400 665.931637755826C217.6327692307692 665.931637755826 118 582.3680480122364 118 400.0000138242021C118 217.6327830549713 217.6327692307692 134.06838989257812 400 134.06838989257812C582.3680341880342 134.06838989257812 682 217.6327830549713 682 400.0000138242021Z " fill="hsl(351, 100%, 67%)"></path><path d="M682 400.0000138242021C682 582.3680480122364 582.3680341880342 665.931637755826 400 665.931637755826C217.6327692307692 665.931637755826 118 582.3680480122364 118 400.0000138242021C118 217.6327830549713 217.6327692307692 134.06838989257812 400 134.06838989257812C582.3680341880342 134.06838989257812 682 217.6327830549713 682 400.0000138242021Z " fill="url(#ccclaymoji-grad-dark)"></path><path d="M682 400.0000138242021C682 582.3680480122364 582.3680341880342 665.931637755826 400 665.931637755826C217.6327692307692 665.931637755826 118 582.3680480122364 118 400.0000138242021C118 217.6327830549713 217.6327692307692 134.06838989257812 400 134.06838989257812C582.3680341880342 134.06838989257812 682 217.6327830549713 682 400.0000138242021Z " fill="url(#ccclaymoji-grad-light)"></path><path d="M402 264.5Q430 330.5 454 264.5 " stroke-width="21" stroke="hsla(0, 0%, 0%, 1.00)" fill="none" filter="url(#eye-shadow)"></path><path d="M402 264.5Q430 330.5 454 264.5 " stroke-width="7" stroke="url(#eye-light)" fill="none" filter="url(#inner-blur)"></path><path d="M488.5 262.75Q529.5 331.75 543.5 262.75 " stroke-width="21" stroke="hsla(0, 0%, 0%, 1.00)" fill="none" filter="url(#eye-shadow)"></path><path d="M488.5 262.75Q529.5 331.75 543.5 262.75 " stroke-width="7" stroke="url(#eye-light)" fill="none" filter="url(#inner-blur)"></path><path d="M426.5 516Q466.5 316 575.5 516 " stroke-width="21" stroke="hsla(55, 94%, 54%, 1.00)" fill="none" filter="url(#mouth-shadow)"></path><path d="M426.5 516Q466.5 316 575.5 516 " stroke-width="7" stroke="url(#mouth-light)" fill="none" filter="url(#inner-blur)"></path></g></svg>';

        string memory svgUri = deployer.svgToImageURI(svgToConvert);

        assert(
            keccak256(abi.encodePacked(svgUri)) ==
                keccak256(abi.encodePacked(expectedUri))
        );
    }
}
